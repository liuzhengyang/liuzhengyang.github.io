(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{524:function(e,n,t){"use strict";t.r(n);var a=t(34),i=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"pipeline"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pipeline"}},[e._v("#")]),e._v(" pipeline")]),e._v(" "),t("p",[e._v("pipeline流水线是研发过程中关键的研发工具，通常使用流水线进行代码检查、编译、打包、部署、自动化测试等自动化功能。")]),e._v(" "),t("p",[e._v("pipeline可以理解为一个任务，任务又能拆分为多个子任务形成DAG(有向无环图)。每个子任务中执行若干命令。\n不同的子任务间可能有数据的传递。")]),e._v(" "),t("p",[e._v("为了便于查看pipeline，一般会将pipeline管理为多个步骤（Phase），每个步骤中有多个并行的任务。")]),e._v(" "),t("p",[e._v("下面举一个常见的Java的代码编译打包部署流程，一个maven管理的Java项目编译打包，然后部署到容器部署环境进行部署。")]),e._v(" "),t("p",[e._v("第一步(Phase)，下载代码，通过git clone 到指定仓库clone代码。\n第二部，通过maven进行mvn clean install。\n第三部，通过docker命令构建上传镜像，这里通过通用的Dockerfile并且允许进行定制化Dockerfile\n第四步，和容器部署平台交互，部署相关的镜像到指定环境。")]),e._v(" "),t("p",[e._v("为了方便创建pipeline，对于通用的流程，一般提供模板方便快速创建。")]),e._v(" "),t("h2",{attrs:{id:"设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设计"}},[e._v("#")]),e._v(" 设计")]),e._v(" "),t("p",[e._v("k8s的JOB非常适合作为pipeline的子任务执行。")]),e._v(" "),t("p",[e._v("调度、执行。")]),e._v(" "),t("p",[e._v("调度: 控制任务的执行")]),e._v(" "),t("p",[e._v("执行: k8s job交互、日志收集")]),e._v(" "),t("p",[e._v("相同pipeline的任务挂载到同一个Node，通过HostPath进行文件共享，比如前一个步骤打包出来的jar包等。")]),e._v(" "),t("h2",{attrs:{id:"相关技术方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关技术方案"}},[e._v("#")]),e._v(" 相关技术方案")]),e._v(" "),t("ul",[t("li",[e._v("jenkins: jenkins是一个历史上比较流行的自动化执行工具")]),e._v(" "),t("li",[e._v("tekton: 新兴的基于k8s的自动化工具。")])])])}),[],!1,null,null,null);n.default=i.exports}}]);